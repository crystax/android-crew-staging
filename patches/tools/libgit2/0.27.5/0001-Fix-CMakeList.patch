diff -Naurw a/src/CMakeLists.txt b/src/CMakeLists.txt
--- a/src/CMakeLists.txt	2018-10-05 20:32:10.000000000 +0300
+++ b/src/CMakeLists.txt	2018-10-25 13:41:59.831709766 +0300
@@ -116,9 +116,9 @@
 	LIST(APPEND LIBGIT2_LIBS "rpcrt4" "crypt32" "ole32")
 	LIST(APPEND LIBGIT2_PC_LIBS "-lrpcrt4" "-lcrypt32" "-lole32")
 ELSE ()
-	IF (CURL)
-		FIND_PKGLIBRARIES(CURL libcurl)
-	ENDIF ()
+        SET(CURL_FOUND TRUE)
+        SET(CURL_LIBRARIES "${CREW_LIB_DIR}/libcurl.${CREW_SHARED_LIB_EXT}")
+        SET(CURL_LDFLAGS "-lcurl")
 	IF (CURL_FOUND)
 		SET(GIT_CURL 1)
 		LIST(APPEND LIBGIT2_INCLUDES ${CURL_INCLUDE_DIRS})
@@ -254,16 +254,12 @@
 
 # Optional external dependency: zlib
 IF(NOT USE_BUNDLED_ZLIB)
-	FIND_PACKAGE(ZLIB)
+        SET(ZLIB_FOUND TRUE)
+        SET(ZLIB_LIBRARIES "${CREW_LIB_DIR}/libz.${CREW_SHARED_LIB_EXT}")
+        SET(ZLIB_LDFLAGS "-lz")
 	IF(ZLIB_FOUND)
-		LIST(APPEND LIBGIT2_INCLUDES ${ZLIB_INCLUDE_DIRS})
 		LIST(APPEND LIBGIT2_LIBS ${ZLIB_LIBRARIES})
-		IF(APPLE OR CMAKE_SYSTEM_NAME MATCHES "FreeBSD")
-			LIST(APPEND LIBGIT2_LIBS "z")
-			LIST(APPEND LIBGIT2_PC_LIBS "-lz")
-		ELSE()
-			LIST(APPEND LIBGIT2_PC_REQUIRES "zlib")
-		ENDIF()
+		LIST(APPEND LIBGIT2_PC_LIBS ${ZLIB_LDFLAGS})
 		ADD_FEATURE_INFO(zlib ON "using system zlib")
 	ELSE()
 		MESSAGE(STATUS "zlib was not found; using bundled 3rd-party sources." )
@@ -277,16 +273,16 @@
 ENDIF()
 
 # Optional external dependency: libssh2
-IF (USE_SSH)
-	FIND_PKGLIBRARIES(LIBSSH2 libssh2)
-ENDIF()
+SET(LIBSSH2_FOUND TRUE)
+SET(LIBSSH2_LIBRARIES "${CREW_LIB_DIR}/libssh2.${CREW_SHARED_LIB_EXT}")
+SET(LIBSSH2_LDFLAGS "-lssh2")
+
 IF (LIBSSH2_FOUND)
 	SET(GIT_SSH 1)
-	LIST(APPEND LIBGIT2_INCLUDES ${LIBSSH2_INCLUDE_DIRS})
 	LIST(APPEND LIBGIT2_LIBS ${LIBSSH2_LIBRARIES})
 	LIST(APPEND LIBGIT2_PC_LIBS ${LIBSSH2_LDFLAGS})
 
-	CHECK_LIBRARY_EXISTS("${LIBSSH2_LIBRARIES}" libssh2_userauth_publickey_frommemory "${LIBSSH2_LIBRARY_DIRS}" HAVE_LIBSSH2_MEMORY_CREDENTIALS)
+	CHECK_LIBRARY_EXISTS("${LIBSSH2_LIBRARIES}" libssh2_userauth_publickey_frommemory "${CREW_LIB_DIR}" HAVE_LIBSSH2_MEMORY_CREDENTIALS)
 	IF (HAVE_LIBSSH2_MEMORY_CREDENTIALS)
 		SET(GIT_SSH_MEMORY_CREDENTIALS 1)
 	ENDIF()
